<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8"/>
    <title>短线指标</title>
    <!-- 引入 ECharts 文件 -->
    <script src="../static/js/echarts.min.js"></script>
    <script src="../static/js/chart_data.js"></script>
    <script src="../static/js/line_chart_fb_rate.js"></script>
    <!-- 引入bootstrap-->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.staticfile.org/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<!--  先拿到从flask传来的数据-->
<script type="text/javascript" >let chartData = new ChartData(); </script>

{% for motion in json['index_motions'] %}
<script type="text/javascript"> chartData.index_motions.push('{{motion}}');</script>
{% endfor %}

{% for timestamp in json['index_timestamps'] %}
<script type="text/javascript"> chartData.index_timestamps.push('{{timestamp}}');</script>
{% endfor %}

{% for timestamp in json['timestamps'] %}
<script type="text/javascript"> chartData.timestamps.push('{{timestamp}}');</script>
{% endfor %}

{% for zhqd in json['zhqds'] %}
<script type="text/javascript"> chartData.zhqds.push('{{zhqd}}');</script>
{% endfor %}

{% for timestamp in json['most_recent_day_timestamps'] %}
<script type="text/javascript"> chartData.most_recent_day_timestamps.push('{{timestamp}}'); </script>
{% endfor %}

{% for zhqd in json['most_recent_day_zhqds'] %}
<script type="text/javascript"> chartData.most_recent_day_zhqds.push('{{zhqd}}'); </script>
{% endfor %}

{% for day in json['trade_day']  %}
<script type="text/javascript"> chartData.trade_day.push('{{day}}'); </script>
{% endfor %}

{% for high in json['highest'] %}
<script type="text/javascript"> chartData.highest.push('{{high}}');</script>
{% endfor %}

{% for rate in json['rate_fengban'] %}
<script type="text/javascript"> chartData.rate_fb.push('{{rate}}');</script>
{% endfor %}

<body>
<div class=".container-fluid">
    <!--    历史市场综合强度、最近三个交易日的市场综合强度-->
    <div class="row" style="margin-top: 32px">
        <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
        <div class="col-md-6" id="zhqd" style="height:500px;"></div>
        <div class="col-md-6" id="last_trade_day_zhqd" style="height:500px;"></div>
    </div>
    <!--  历史连板高度-->
    <!--  历史封板率-->
    <div class="row" >
        <div class="col-lg-6" id="lian_ban_highest" style="height:500px;"></div>
        <div class="col-lg-6" id="feng_ban_rate" style="height:500px;"></div>
    </div>
    <!--    历史指数情绪、最近三个交易日的指数情绪-->
    <div class="row"  style="margin-top: 32px; margin-bottom: 32px">
        <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
        <div class="col-md-6" id="index_motion_strength" style="height:500px;"></div>
        <div class="col-md-6" id="index_last_trade_day_motion_strength" style="height:500px;"></div>
    </div>
</div>

<!-- 引入 定义好ECharts样式的line_chart 文件 -->
<script src="../static/js/line_chart.js"></script>
<script src="../static/js/line_chart_highest.js"></script>
<script src="../static/js/line_chart_for_recent_day.js"></script>
<script type="text/javascript">
    //近50个交易日的指数情绪
    let chart_index_motion_50day = new MotionStrengthLineChart("指数情绪", chartData.index_timestamps, chartData.index_motions);
    // 基于准备好的dom，初始化市场情绪echarts实例
    index_motion_chart = echarts.init(document.getElementById('index_motion_strength'));
    // 使用刚指定的配置项和数据显示图表。
    index_motion_chart.setOption(chart_index_motion_50day.option);

    //近最近5个交易日的指数情绪
    let chart_index_motion_recent = new MotionStrengthRecentDay("近三日指数情绪（精确到分）（数据待录入）", chartData.index_timestamps, chartData.index_motions)
    // 基于准备好的dom，初始化市场情绪echarts实例
    index_last_trade_day_motion_strength = echarts.init(document.getElementById('index_last_trade_day_motion_strength'));
    // 使用刚指定的配置项和数据显示图表。
    index_last_trade_day_motion_strength.setOption(chart_index_motion_recent.option);

    //近50个交易日的市场综合强度
    let chart_50day = new MotionStrengthLineChart("市场综合强度", chartData.timestamps, chartData.zhqds);
    // 基于准备好的dom，初始化市场情绪echarts实例
    zhqd_chart = echarts.init(document.getElementById('zhqd'));
    // 使用刚指定的配置项和数据显示图表。
    zhqd_chart.setOption(chart_50day.option);

    //近最近三个交易日的市场综合强度
    let chart_last_trade_day = new MotionStrengthRecentDay("最近三个交易日市场综合强度", chartData.most_recent_day_timestamps,
        chartData.most_recent_day_zhqds)
    // 基于准备好的dom，初始化市场情绪echarts实例
    last_trade_day_zhqd_chart = echarts.init(document.getElementById('last_trade_day_zhqd'));
    // 使用刚指定的配置项和数据显示图表。
    last_trade_day_zhqd_chart.setOption(chart_last_trade_day.option);

    //近100个交易日的连板高度情况
    let chart_lian_ban = new HighestLineChart("历史连板高度", chartData.trade_day, chartData.highest)
    // 基于准备好的dom，初始化市场情绪echarts实例
    lian_ban_highest_chart = echarts.init(document.getElementById('lian_ban_highest'));
    // 使用刚指定的配置项和数据显示图表。
    lian_ban_highest_chart.setOption(chart_lian_ban.option);

    //近100个交易日的封板率
    let chart_fb_rate = new FbRateLineChart("历史封板率", chartData.trade_day, chartData.rate_fb)
    // 基于准备好的dom，初始化市场情绪echarts实例
    rate_fb_chart = echarts.init(document.getElementById('feng_ban_rate'));
    // 使用刚指定的配置项和数据显示图表。
    rate_fb_chart.setOption(chart_fb_rate.option);

</script>
</body>
</html>